{
  "id": "root",
  "question": "Quel est le symptôme principal ?",
  "choices": {
    "moteur_ne_demarre_pas": {
      "id": "s1",
      "question": "Le moteur ne démarre pas du tout (aucun bruit) ?",
      "yes": {
        "id": "s1_yes",
        "hypothesis": "Problème électrique de démarrage: batterie déchargée, coupure alimentation, fusible, coupe-circuit.",
        "actions": [
          "Vérifier tension batterie (12V moteur arrêté, >=12.4V recommandé)",
          "Tester câbles et connexions batterie",
          "Contrôler fusibles et relais de démarrage",
          "Vérifier position coupe-circuit/antidémarrage et neutre (boîte auto)"
        ]
      },
      "no": {
        "id": "s1_no",
        "question": "On entend un cliquetis ou le démarreur tourne mais le moteur ne lance pas ?",
        "yes": {
          "id": "s1_no_yes",
          "hypothesis": "Démarreur ou liaison mécanique défaillant, ou batterie faible pour tourner correctement.",
          "actions": [
            "Tester ou remplacer démarreur/solénoïde",
            "Vérifier état et charge batterie (test au démarrage)",
            "Contrôler serrage bornes et corrosion",
            "Si cliquetis : vérifier relais de démarreur"
          ]
        },
        "no": {
          "id": "s1_no_no",
          "question": "Moteur semble lancer puis caler immédiatement ?",
          "yes": {
            "id": "s1_no_no_yes",
            "hypothesis": "Pas de démarrage complet: problème d'injection ou d'allumage (pas d'étincelle, pas de carburant).",
            "actions": [
              "Vérifier présence carburant",
              "Contrôler pompe à carburant et pression",
              "Vérifier bougies et bobines d'allumage",
              "Lire codes défaut via OBD-II"
            ]
          },
          "no": {
            "id": "s1_no_no_no",
            "hypothesis": "Cas atypique: consulter diag électronique ou manuel constructeur.",
            "actions": ["Brancher outil de diagnostic", "Consulter schéma électrique constructeur"]
          }
        }
      }
    },

    "moteur_tourne_mais_maigre_puissance": {
      "id": "s2",
      "question": "Moteur tourne mais perte de puissance/accélération réduite ?",
      "yes": {
        "id": "s2_yes",
        "question": "Présence de voyants moteur (check engine) allumés ?",
        "yes": {
          "id": "s2_yes_yes",
          "hypothesis": "Codes défaut indiquent capteurs, coupleur ou organes (sonde lambda, débitmètre, vanne EGR, turbo).",
          "actions": [
            "Lire et noter les codes défaut OBD-II",
            "Contrôler débitmètre d'air (MAF) et prises d'air",
            "Vérifier sonde lambda et catalyseur",
            "Contrôler vanne EGR et admission pour dépôts",
            "Tester turbo (jeu, fuite) si moteur turbocompressé"
          ]
        },
        "no": {
          "id": "s2_yes_no",
          "question": "Il y a des à-coups ou perte de puissance à bas régime uniquement ?",
          "yes": {
            "id": "s2_yes_no_yes",
            "hypothesis": "Problème d'allumage/injection ou filtre à carburant encrassé.",
            "actions": [
              "Vérifier bougies et bobines",
              "Contrôler filtre à carburant",
              "Tester pression rail/injecteurs (diesel : pompe haute pression)",
              "Contrôler vanne de réglage de ralenti (si présente)"
            ]
          },
          "no": {
            "id": "s2_yes_no_no",
            "hypothesis": "Fuite d'admission/perte de charge: admission, échappement, fuites de collecteur ou catalyseur bouché.",
            "actions": [
              "Contrôler fuites admission (manchons, pipes)",
              "Vérifier débit d'échappement et sonde S.O.S. catalyseur",
              "Contrôler pression sur turbo si applicable"
            ]
          }
        }
      },
      "no": {
        "id": "s2_no",
        "hypothesis": "Pas applicable.",
        "actions": []
      }
    },

    "fumee_ou_odeur": {
      "id": "s3",
      "question": "Y a-t-il de la fumée visible (couleur) ou une odeur particulière ?",
      "yes": {
        "id": "s3_yes",
        "question": "Couleur de la fumée ? (bleu/blanc/noir)",
        "blue": {
          "id": "s3_yes_blue",
          "hypothesis": "Fumée bleue : consommation d'huile (segments, guides, turbo HS).",
          "actions": [
            "Contrôler niveau huile après arrêt",
            "Vérifier consommation entre vidanges",
            "Tester jeu turbo et état segments",
            "Contrôler joints de queue de soupape et soufflets turbo"
          ]
        },
        "white": {
          "id": "s3_yes_white",
          "hypothesis": "Fumée blanche persistante : fuite liquide de refroidissement (joint de culasse, fissure).",
          "actions": [
            "Vérifier niveau liquide de refroidissement",
            "Contrôler présence d'huile dans le vase d'expansion (mousse)",
            "Faire test de compression et test de CO2 dans le circuit de refroidissement",
            "Consulter garage si joint de culasse suspect"
          ]
        },
        "black": {
          "id": "s3_yes_black",
          "hypothesis": "Fumée noire : mélange riche (carburant non brûlé), filtre à air encrassé, capteur air/carburant défaillant.",
          "actions": [
            "Contrôler filtre à air",
            "Vérifier injecteurs qui fuient ou calibrage",
            "Lire codes défaut et vérifier capteurs MAF/sonde lambda",
            "Contrôler retour carburant et pression rail"
          ]
        }
      },
      "no": {
        "id": "s3_no",
        "hypothesis": "Pas de fumée ou odeur notable.",
        "actions": []
      }
    },

    "surchauffe": {
      "id": "s4",
      "question": "Le moteur chauffe anormalement (témoin température/thermostat) ?",
      "yes": {
        "id": "s4_yes",
        "question": "Perte de liquide de refroidissement visible ?",
        "yes": {
          "id": "s4_yes_yes",
          "hypothesis": "Fuite circuit refroidissement (durite, radiateur, pompe à eau, joint de culasse).",
          "actions": [
            "Vérifier fuite apparente sous le véhicule",
            "Contrôler niveau et pression du circuit de refroidissement",
            "Tester pompe à eau et état courroie/accessoires",
            "Contrôler thermostat et ventilateur électrique"
          ]
        },
        "no": {
          "id": "s4_yes_no",
          "hypothesis": "Circulation insuffisante (thermostat bloqué, ventilateur, calamine), capteur de température défaillant.",
          "actions": [
            "Vérifier fonctionnement du ventilateur (électrique ou méc.)",
            "Tester ouverture du thermostat",
            "Lire codes défaut de sonde de température",
            "Contrôler radiateur pour obstruction"
          ]
        }
      },
      "no": {
        "id": "s4_no",
        "hypothesis": "Température normale.",
        "actions": []
      }
    },

    "probleme_charge_batterie": {
      "id": "s5",
      "question": "Batterie se décharge rapidement ou témoin de charge allumé ?",
      "yes": {
        "id": "s5_yes",
        "question": "Alternateur fournit-il la charge (tension moteur au ralenti >13.5V) ?",
        "no": {
          "id": "s5_yes_no",
          "hypothesis": "Alternateur défaillant ou régulateur HS.",
          "actions": [
            "Mesurer tension batterie moteur en marche (>13.5V)",
            "Contrôler courroie d'alternateur",
            "Tester alternateur (diodes, régulateur)",
            "Vérifier voyants et câblage de charge"
          ]
        },
        "yes": {
          "id": "s5_yes_yes",
          "hypothesis": "Consommation parasite ou batterie faible/ancienne.",
          "actions": [
            "Effectuer test de courant de fuite (par ex. débrancher fusibles par groupes)",
            "Tester capacité batterie (C20) et remplacer si faible",
            "Vérifier accessoires gourmands (autoradio, alarme)"
          ]
        }
      },
      "no": {
        "id": "s5_no",
        "hypothesis": "Pas de symptôme de charge.",
        "actions": []
      }
    },

    "voyant_abs_ou_freinage": {
      "id": "s6",
      "question": "Voyant ABS ou défaut freinage allumé ?",
      "yes": {
        "id": "s6_yes",
        "hypothesis": "Capteurs ABS, unité hydraulique, ou niveau/pression freinage en cause.",
        "actions": [
          "Vérifier niveau liquide de frein",
          "Lire codes défaut ABS avec outil spécifique",
          "Contrôler capteurs de roue (propreté, câbles)",
          "Contrôler module hydraulique/connexion électrique"
        ]
      },
      "no": {
        "id": "s6_no",
        "hypothesis": "Pas de voyant.",
        "actions": []
      }
    },

    "bruit_anormal": {
      "id": "s7",
      "question": "Bruit anormal (claquement, cliquetis, grincement) ?",
      "yes": {
        "id": "s7_yes",
        "question": "Le bruit provient du moteur (haut moteur) ?",
        "yes": {
          "id": "s7_yes_motor",
          "question": "Cliquetis au démarrage ou en accélération ?",
          "yes": {
            "id": "s7_yes_motor_yes",
            "hypothesis": "Jeu aux soupapes, tendeur de chaîne/courroie distribution, poussoirs ou injecteurs qui claquent.",
            "actions": [
              "Vérifier jeu aux soupapes si réparable",
              "Contrôler tension chaîne ou état courroie de distribution",
              "Inspecter injecteurs et supports",
              "Contrôler huile (viscosité, niveau)"
            ]
          },
          "no": {
            "id": "s7_yes_motor_no",
            "hypothesis": "Autres bruits haut moteur: couvre-culasse, supports, accessoires.",
            "actions": ["Localiser bruit avec stéthoscope mécanique", "Vérifier supports moteur et accessoires"]
          }
        },
        "no": {
          "id": "s7_yes_other",
          "question": "Le bruit vient des roues/suspension ?",
          "yes": {
            "id": "s7_yes_other_yes",
            "hypothesis": "Roulements, amortisseurs, silentblocs, flexibles, pneus.",
            "actions": [
              "Tester roue levée: jeu de roulement",
              "Contrôler état pneus et usure irrégulière",
              "Vérifier soufflets cardan/rotule de direction",
              "Contrôler fixation échappement (sangles)"
            ]
          },
          "no": {
            "id": "s7_yes_other_no",
            "hypothesis": "Bruit difficile à localiser: faire diagnostic route avec repères.",
            "actions": ["Effectuer essai routier pour isoler conditions bruit", "Faire contrôle visuel dessous véhicule"]
          }
        }
      },
      "no": {
        "id": "s7_no",
        "hypothesis": "Aucun bruit anormal déclaré.",
        "actions": []
      }
    },

    "vibrations": {
      "id": "s8",
      "question": "Vibrations au ralenti, en accélération ou à vitesse constante ?",
      "ralenti": {
        "id": "s8_ralenti",
        "hypothesis": "Problème d'allumage, supports moteur, injection (bougies/bobines, injecteurs), ou filtre à air encrassé.",
        "actions": [
          "Vérifier bougies et bobines",
          "Contrôler supports moteur",
          "Lire codes défaut et tester injecteurs"
        ]
      },
      "acceleration": {
        "id": "s8_accel",
        "hypothesis": "Déséquilibre arbres, cardans, volant moteur bi-masse, ou pneus.",
        "actions": [
          "Contrôler cardans et soufflets",
          "Tester volant moteur et embrayage (patinage)",
          "Vérifier équilibre et état pneus"
        ]
      },
      "vitesse_constante": {
        "id": "s8_vitesse",
        "hypothesis": "Déséquilibre pneus/roues, géométrie, ou transmission.",
        "actions": ["Equilibrer roues", "Vérifier géométrie", "Contrôler arbre de transmission si présent"]
      }
    },

    "perte_de_freinage": {
      "id": "s9",
      "question": "Perte de freinage ou pédale molle/dure ?",
      "pedale_molle": {
        "id": "s9_molle",
        "hypothesis": "Présence d'air dans circuit, fuite, ou maître-cylindre défectueux.",
        "actions": [
          "Vérifier niveau liquide de frein",
          "Contrôler présence de fuite (durites, étriers)",
          "Purger le circuit et tester maître-cylindre"
        ]
      },
      "pedale_dure": {
        "id": "s9_dure",
        "hypothesis": "Freinage assisté défaillant (servo-frein), ou prise d'air dans servo.",
        "actions": [
          "Tester dépression servo-frein", 
          "Vérifier clapet et tuyauterie de dépression",
          "Contrôler pompe à vide si moteur diesel avec pompe dédiée"
        ]
      }
    },

    "transmission_probleme": {
      "id": "s10",
      "question": "Boîte auto ou manuelle présente un problème (passage de vitesses, bruit, patinage) ?",
      "auto": {
        "id": "s10_auto",
        "question": "Vitesses qui passent mal ou glissement ?",
        "yes": {
          "id": "s10_auto_yes",
          "hypothesis": "Problème hydraulique/électronique de boîte: niveau d'huile, solénoïdes, embrayage, convertisseur.",
          "actions": [
            "Vérifier niveau d'huile boîte (prévoir huile constructeur)",
            "Lire codes de transmission si disponible",
            "Vérifier solénoïdes et câblage boîte", 
            "Contrôler convertisseur de couple"
          ]
        },
        "no": {
          "id": "s10_auto_no",
          "hypothesis": "Problème mécanique interne: consulter boîte (diagnostic pro).",
          "actions": ["Consulter atelier spécialisé boîte auto"]
        }
      },
      "manuelle": {
        "id": "s10_manuel",
        "question": "Embrayage patine ou jeu anormal ?",
        "yes": {
          "id": "s10_manuel_yes",
          "hypothesis": "Embrayage usé, butée, câble hydraulique ou réglage nécessaire.",
          "actions": [
            "Tester patinage en montée", 
            "Contrôler règlage câble ou fuite hydraulique d'embrayage",
            "Vérifier usure disque et butée"
          ]
        },
        "no": {
          "id": "s10_manuel_no",
          "hypothesis": "Problème boîte (pignons, synchros) possible.",
          "actions": ["Faire diagnostic boîte de vitesses"]
        }
      }
    },

    "climatisation_refrigeration": {
      "id": "s11",
      "question": "Climatisation ne refroidit pas ?",
      "yes": {
        "id": "s11_yes",
        "hypothesis": "Manque de gaz, compresseur HS, orifice bouché, débit d'air insuffisant.",
        "actions": [
          "Vérifier débit d'air et filtres habitacle",
          "Tester pression circuit clim (charge gaz)",
          "Contrôler compresseur et embrayage",
          "Contrôler condenseur et ventilateurs"
        ]
      },
      "no": {
        "id": "s11_no",
        "hypothesis": "Clim OK.",
        "actions": []
      }
    },

    "phares_ou_eclairage": {
      "id": "s12",
      "question": "Problème d'éclairage (phares, feux, clignotants) ?",
      "yes": {
        "id": "s12_yes",
        "hypothesis": "Ampoule grillée, fusible, relais, ou problème de masse/connectique.",
        "actions": [
          "Vérifier ampoules et fusibles correspondants",
          "Contrôler connecteurs et masse de phare",
          "Tester commutateur d'éclairage et relais"
        ]
      },
      "no": {
        "id": "s12_no",
        "hypothesis": "Pas de symptôme.",
        "actions": []
      }
    },

    "voyant_batterie_ou_moteur_allume": {
      "id": "s13",
      "question": "Témoin moteur (check engine) ou batterie allumé ?",
      "engine": {
        "id": "s13_engine",
        "hypothesis": "Lire les codes OBD-II pour diagnostic précis (sonde, catalyseur, capteur).",
        "actions": ["Brancher lecteur OBD-II et noter codes défaut", "Consulter définition codes et opérations recommandées"]
      },
      "battery": {
        "id": "s13_battery",
        "hypothesis": "Voir section charge/batterie (alternateur, câblage).",
        "actions": ["Vérifier tension batterie", "Tester alternateur"]
      }
    },

    "consommation_forte_de_carburant": {
      "id": "s14",
      "question": "Consommation de carburant anormale ?",
      "yes": {
        "id": "s14_yes",
        "hypothesis": "Conduite, pneus, injection riche, capteurs, catalyseur, pression pneumatiques.",
        "actions": [
          "Vérifier pression pneus et comportement aérodynamique (porte ouverts, coffre)",
          "Lire codes défaut (sonde lambda, MAF)",
          "Contrôler pression rail/injecteurs", 
          "Vérifier filtre à air"
        ]
      },
      "no": {
        "id": "s14_no",
        "hypothesis": "OK.",
        "actions": []
      }
    },

    "fuite_fluide": {
      "id": "s15",
      "question": "Présence de fuite (liquide couleur identifié) ?",
      "oil": {
        "id": "s15_oil",
        "hypothesis": "Fuite huile: joints, bouchon, filtre, carter, joint de queue de vilebrequin.",
        "actions": ["Identifier point de fuite à moteur chaud", "Remplacer joints/filtres défectueux"]
      },
      "coolant": {
        "id": "s15_coolant",
        "hypothesis": "Fuite circuit refroidissement: durite, radiateur, pompe à eau.",
        "actions": ["Contrôler et remplacer durites et colliers", "Tester radiateur et bouchon de vase"]
      },
      "fuel": {
        "id": "s15_fuel",
        "hypothesis": "Fuite carburant: tuyauterie, injecteurs, raccords.",
        "actions": ["Couper contact et réparer prise d'essence", "Vérifier raccords et durites"]
      }
    },

    "odeur_gaz_d_echappement_dans_habitacle": {
      "id": "s16",
      "hypothesis": "Fuite d'échappement ou problème de catalyseur, danger CO possible.",
      "actions": ["Contrôler étanchéité ligne d'échappement", "Ne pas circuler si forte odeur de gaz d'échappement", "Consulter atelier"]
    },

    "probleme_direction": {
      "id": "s17",
      "question": "Direction dure, vibration volant ou tirage ?",
      "hard": {
        "id": "s17_hard",
        "hypothesis": "Direction assistée (pompe, fuite), courroie, ou problèmes mécaniques.",
        "actions": ["Vérifier niveau huile direction assistée", "Contrôler courroie d'accessoires", "Tester pompe de direction"]
      },
      "pull": {
        "id": "s17_pull",
        "hypothesis": "Géométrie, pneus, freins collés.",
        "actions": ["Vérifier parallélisme/géométrie", "Contrôler pression pneus et usure", "Tester étriers" ]
      }
    },

    "probleme_allumage_clignotants_essuie_glace": {
      "id": "s18",
      "question": "Essuie-glace/cligno/alarme fonctionne mal ?",
      "yes": {
        "id": "s18_yes",
        "hypothesis": "Relais, fusible, module confort ou interrupteur usé.",
        "actions": ["Vérifier fusibles et relais", "Contrôler commutateurs et masse", "Tester module confort si présent"]
      },
      "no": {
        "id": "s18_no",
        "hypothesis": "Pas de symptôme.",
        "actions": []
      }
    },

    "probleme_suspension": {
      "id": "s19",
      "question": "Suspension affaissée, claquements, inconfort ?",
      "yes": {
        "id": "s19_yes",
        "hypothesis": "Amortisseurs HS, ressorts cassés, silentblocs, réglage hauteur (si pneumatique).",
        "actions": ["Contrôler fuite d'huile sur amortisseurs", "Vérifier silentblocs et rotules", "Tester système pneumatique si équipé"]
      },
      "no": {
        "id": "s19_no",
        "hypothesis": "OK.",
        "actions": []
      }
    },

    "inspection_general": {
      "id": "s20",
      "hypothesis": "Inspection générale recommandée si plusieurs symptômes ou doute.",
      "actions": ["Brancher outil de diagnostic OBD-II", "Vérifier historiques de maintenance", "Faire contrôle technique approfondi"]
    }
  }
}
